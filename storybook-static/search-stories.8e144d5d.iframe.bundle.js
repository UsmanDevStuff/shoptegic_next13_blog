"use strict";(self.webpackChunknext_blog=self.webpackChunknext_blog||[]).push([[316],{"./node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}__webpack_require__.d(__webpack_exports__,{Z:()=>_arrayLikeToArray})},"./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>_unsupportedIterableToArray});var _arrayLikeToArray_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js");function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return(0,_arrayLikeToArray_js__WEBPACK_IMPORTED_MODULE_0__.Z)(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,_arrayLikeToArray_js__WEBPACK_IMPORTED_MODULE_0__.Z)(o,minLen):void 0}}},"./lib/datetime.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{o:()=>formatDateTime});var dateFormatter=new Intl.DateTimeFormat("en-US",{month:"long",day:"numeric",year:"numeric"}),relativeTimeFormatter=new Intl.RelativeTimeFormat("en-US",{numeric:"auto"});function formatDateTime(dateString){var date=new Date(dateString);if(isNaN(date.getTime()))return{asString:"Invalid Date",asISOString:"Invalid Date",asRelativeTimeString:"Invalid Date",isFresh:!1};var _getRelativeTime=function getRelativeTime(date){var timeDiff=date.getTime()-(new Date).getTime(),days=Math.ceil(timeDiff/864e5);if(days>-14)return{relativeTime:relativeTimeFormatter.format(days,"day"),isFresh:days>-4};var weeks=Math.floor(days/7);if(weeks>-8)return{relativeTime:relativeTimeFormatter.format(weeks,"week"),isFresh:!1};var months=Math.floor(days/30);if(months>-12)return{relativeTime:relativeTimeFormatter.format(months,"month"),isFresh:!1};var years=Math.floor(days/365);return{relativeTime:relativeTimeFormatter.format(years,"year"),isFresh:!1}}(date),relativeTime=_getRelativeTime.relativeTime,isFresh=_getRelativeTime.isFresh;return{asString:dateFormatter.format(date),asISOString:date.toISOString(),asRelativeTimeString:relativeTime,isFresh}}},"./components/stories/search.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Normal:()=>Normal,default:()=>search_stories});var defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),react=__webpack_require__("./node_modules/react/index.js"),search_store=__webpack_require__("./stores/search-store.ts"),createLucideIcon=__webpack_require__("./node_modules/lucide-react/dist/esm/createLucideIcon.js");const ChevronUp=(0,createLucideIcon.Z)("ChevronUp",[["polyline",{points:"18 15 12 9 6 15",key:"1uugdp"}]]);var shallow=__webpack_require__("./node_modules/zustand/esm/shallow.mjs");const X=(0,createLucideIcon.Z)("X",[["line",{x1:"18",x2:"6",y1:"6",y2:"18",key:"15jfxm"}],["line",{x1:"6",x2:"18",y1:"6",y2:"18",key:"d1lma3"}]]);var utils=__webpack_require__("./lib/utils.ts"),__jsx=react.createElement;function SearchInput(_ref){var hasResults=_ref.hasResults,query=(0,search_store.R)((function(state){return state.query})),setQuery=(0,search_store.R)((function(state){return state.setQuery}));return __jsx(react.Fragment,null,__jsx("input",{type:"text",autoFocus:!0,value:query,onChange:function onChange(e){return setQuery(e.target.value)},placeholder:placeholders[Math.floor(Math.random()*placeholders.length)],className:(0,utils.cn)("w-full rounded border px-2 placeholder:opacity-50",hasResults?"sm:text-2xl":"sm:text-4xl","border-slate-400 bg-slate-100 text-slate-700","dark:border-slate-500 dark:bg-slate-700 dark:text-rose-50"),"aria-label":"Search Posts"}),query&&__jsx("button",{onClick:function onClick(){return setQuery("")},className:(0,utils.cn)("absolute right-14 top-[1.1rem]",hasResults?"sm:top-5":"sm:top-7")},__jsx(X,{className:"icon-base text-slate-500 dark:text-slate-400","aria-label":"Clear"})))}var placeholders=["What are you looking for?","Something need doing?","Looking for something specific?","Looking for something special?","Ah, I have just the thing for you.","What brings you here?","Whatcha lookin for?","You need somethin'?","I got what you need!","Yeah, what do you want?","What do you require?","I have exactly what you need.","What can I get for ya today?","May you find what you seek.","I hope you'll find something useful!","Feel free to browse."];SearchInput.__docgenInfo={description:"",methods:[],displayName:"SearchInput",props:{hasResults:{required:!0,tsType:{name:"boolean"},description:""}}};try{SearchInput.displayName="SearchInput",SearchInput.__docgenInfo={description:"",displayName:"SearchInput",props:{hasResults:{defaultValue:null,description:"",name:"hasResults",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["components/search-input.tsx#SearchInput"]={docgenInfo:SearchInput.__docgenInfo,name:"SearchInput",path:"components/search-input.tsx#SearchInput"})}catch(__react_docgen_typescript_loader_error){}var next_link=__webpack_require__("./node_modules/next/link.js"),link_default=__webpack_require__.n(next_link),dist=__webpack_require__("./node_modules/react-wrap-balancer/dist/index.mjs"),datetime=__webpack_require__("./lib/datetime.ts"),search_results_jsx=react.createElement;function SearchResults(_ref){var query=_ref.query,results=_ref.results,toggleSearch=(0,search_store.R)((function(state){return state.toggleSearch}));return search_results_jsx("ul",{className:"flex flex-col overflow-scroll"},results.map((function(post){var publishedDate=(0,datetime.o)(post.date);return search_results_jsx("li",{key:post.slug,className:(0,utils.cn)("rounded p-2 transition-none sm:px-8","even:bg-slate-400/30 hover:bg-slate-500/50","dark:even:bg-slate-700/60 dark:hover:bg-slate-400/40")},search_results_jsx(link_default(),{href:post.url,onClick:toggleSearch,className:"flex h-fit flex-col"},search_results_jsx("span",{className:"font-semibold text-slate-800 dark:text-rose-50 sm:text-xl"},search_results_jsx(dist.ZP,null,highlightSearchQuery(query,post.title))),search_results_jsx("span",{className:"text-sm text-slate-700 dark:text-rose-50 sm:text-base"},highlightSearchQuery(query,post.excerpt)),search_results_jsx("span",{className:"text-sm text-slate-600 dark:text-slate-300"},publishedDate.asString," · ",publishedDate.asRelativeTimeString)))})))}function highlightSearchQuery(query,text){var sanitizedQuery=query.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&");return text.split(new RegExp("(".concat(sanitizedQuery,")"),"gi")).map((function(part,i){return search_results_jsx("span",{key:i,className:part.toLowerCase()===query.toLowerCase()?"font-extrabold":void 0},part)}))}SearchResults.displayName="SearchResults",SearchResults.__docgenInfo={description:"",methods:[],displayName:"SearchResults",props:{query:{required:!0,tsType:{name:"string"},description:""},results:{required:!0,tsType:{name:"Array",elements:[{name:"Post"}],raw:"Post[]"},description:""}}};try{SearchResults.displayName="SearchResults",SearchResults.__docgenInfo={description:"",displayName:"SearchResults",props:{query:{defaultValue:null,description:"",name:"query",required:!0,type:{name:"string"}},results:{defaultValue:null,description:"",name:"results",required:!0,type:{name:"Post[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["components/search-results.tsx#SearchResults"]={docgenInfo:SearchResults.__docgenInfo,name:"SearchResults",path:"components/search-results.tsx#SearchResults"})}catch(__react_docgen_typescript_loader_error){}var unsupportedIterableToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||(0,unsupportedIterableToArray.Z)(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function searchHit(query,text){return text.toLowerCase().includes(query.toLowerCase())}var search_tags_jsx=react.createElement;function SearchTags(_ref){var posts=_ref.posts,className=_ref.className,tagsWithCounts=(0,react.useMemo)((function(){return function getTagsWithCount(posts){var tagsWithCount=new Map;return posts.forEach((function(post){post.tags.forEach((function(tag){var _tagsWithCount$get;tagsWithCount.set(tag,(null!==(_tagsWithCount$get=tagsWithCount.get(tag))&&void 0!==_tagsWithCount$get?_tagsWithCount$get:0)+1)}))})),Array.from(tagsWithCount.entries()).sort((function(_ref7,_ref8){var a=_slicedToArray(_ref7,2)[1];return _slicedToArray(_ref8,2)[1]-a}))}(posts)}),[posts]),setQuery=(0,search_store.R)((function(state){return state.setQuery}));return search_tags_jsx("div",{className:(0,utils.cn)("flex h-fit flex-row flex-wrap items-center justify-center space-x-4 space-y-1 text-sm",className)},tagsWithCounts.map((function(_ref2){var _ref3=_slicedToArray(_ref2,2),tag=_ref3[0],count=_ref3[1];return search_tags_jsx("button",{key:tag,onClick:function onClick(){return setQuery(tag)},className:"flex w-fit flex-row items-baseline space-x-0.5"},search_tags_jsx("span",{className:"text-slate-600 hover:text-accent dark:text-slate-300 dark:hover:text-accent-dark"},"#",tag),search_tags_jsx("span",{className:"font-mono text-xs text-slate-600 dark:text-slate-300"},"(",count,")"))})))}SearchTags.displayName="SearchTags",SearchTags.__docgenInfo={description:"",methods:[],displayName:"SearchTags",props:{posts:{required:!0,tsType:{name:"Array",elements:[{name:"Post"}],raw:"Post[]"},description:""},className:{required:!1,tsType:{name:"string"},description:""}}};try{SearchTags.displayName="SearchTags",SearchTags.__docgenInfo={description:"",displayName:"SearchTags",props:{posts:{defaultValue:null,description:"",name:"posts",required:!0,type:{name:"Post[]"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["components/search-tags.tsx#SearchTags"]={docgenInfo:SearchTags.__docgenInfo,name:"SearchTags",path:"components/search-tags.tsx#SearchTags"})}catch(__react_docgen_typescript_loader_error){}var _Normal$parameters,_Normal$parameters2,_Normal$parameters2$d,search_jsx=react.createElement;function Search(_ref){var posts=_ref.posts,_useSearchStore=(0,search_store.R)((function(state){return{query:state.query,isSearching:state.isSearching,toggleSearch:state.toggleSearch}}),shallow.X),query=_useSearchStore.query,isSearching=_useSearchStore.isSearching,toggleSearch=_useSearchStore.toggleSearch,results=(0,react.useMemo)((function(){return function searchPosts(query,posts){var postsWithSearchHits=new Map;return posts.forEach((function(post){if(query){var title=post.title,excerpt=post.excerpt,tags=post.tags,raw=post.body.raw,searchHits=0;tags.some((function(tag){return searchHit(query,tag)}))&&(searchHits+=10),searchHit(query,title)&&(searchHits+=10),searchHit(query,excerpt)&&(searchHits+=5),searchHit(query,raw)&&searchHits++,searchHits>0&&postsWithSearchHits.set(post,searchHits)}})),Array.from(postsWithSearchHits.entries()).sort((function(_ref,_ref2){var a=_slicedToArray(_ref,2)[1];return _slicedToArray(_ref2,2)[1]-a})).map((function(_ref5){return _slicedToArray(_ref5,1)[0]}))}(query,posts)}),[query,posts]);return(0,react.useEffect)((function(){var handleKeyDown=function handleKeyDown(e){(e.metaKey||e.ctrlKey)&&"k"===e.key&&(e.preventDefault(),toggleSearch())};return document.addEventListener("keydown",handleKeyDown),function(){return document.removeEventListener("keydown",handleKeyDown)}}),[toggleSearch]),isSearching?search_jsx("section",{className:(0,utils.cn)("fixed left-1/2 top-1/2 z-50 h-fit max-h-[80vh] w-5/6 max-w-3xl -translate-x-1/2 -translate-y-1/2","flex flex-col rounded-md border-2 p-4 backdrop-blur-md","border-slate-400 bg-slate-200/40","dark:border-slate-500 dark:bg-slate-600/80")},search_jsx("div",{className:"mb-2 flex h-fit flex-row items-center"},search_jsx(SearchInput,{hasResults:results.length>0}),search_jsx("button",{onClick:toggleSearch},search_jsx(ChevronUp,{className:"icon-base ml-2 text-slate-400 dark:text-slate-400","aria-label":"Close Search"}))),search_jsx(SearchResults,{query,results}),results.length>0&&search_jsx("hr",{className:"my-2 border-slate-400 dark:border-slate-500 max-xs:hidden"}),search_jsx(SearchTags,{posts,className:(0,utils.cn)("my-2",results.length>0?"max-xs:hidden sm:text-base":"sm:text-lg")}),search_jsx("div",{className:"absolute bottom-1 left-2 text-xs text-slate-600 dark:text-slate-200 max-sm:hidden"},"Toggle with ⌘+K or Ctrl+K")):null}Search.displayName="Search",Search.__docgenInfo={description:"",methods:[],displayName:"Search",props:{posts:{required:!0,tsType:{name:"Array",elements:[{name:"Post"}],raw:"Post[]"},description:""}}};try{Search.displayName="Search",Search.__docgenInfo={description:"",displayName:"Search",props:{posts:{defaultValue:null,description:"",name:"posts",required:!0,type:{name:"Post[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["components/search.tsx#Search"]={docgenInfo:Search.__docgenInfo,name:"Search",path:"components/search.tsx#Search"})}catch(__react_docgen_typescript_loader_error){}var search_stories_jsx=react.createElement;function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){(0,defineProperty.Z)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var posts=Array.from({length:50},(function(_,index){return{title:"Example Post ".concat(index+1),excerpt:"This is an example post.",date:"2022-01-01",tags:["example","post","test","storybook","tag".concat((index+1)%10)],url:"/posts/post-".concat(index+1),slug:"posts/post-".concat(index+1),body:{raw:"Post ".concat(index+1," body")}}}));const search_stories={title:"Search",component:Search,decorators:[function(Story){return(0,search_store.R)((function(state){return state.toggleSearch}))(),search_stories_jsx(Story,null)}]};var Normal={args:{posts}};Normal.parameters=_objectSpread(_objectSpread({},Normal.parameters),{},{docs:_objectSpread(_objectSpread({},null===(_Normal$parameters=Normal.parameters)||void 0===_Normal$parameters?void 0:_Normal$parameters.docs),{},{source:_objectSpread({originalSource:"{\n  args: {\n    posts\n  }\n}"},null===(_Normal$parameters2=Normal.parameters)||void 0===_Normal$parameters2||null===(_Normal$parameters2$d=_Normal$parameters2.docs)||void 0===_Normal$parameters2$d?void 0:_Normal$parameters2$d.source)})})},"./stores/search-store.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{R:()=>useSearchStore});var zustand__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/zustand/esm/index.mjs"),zustand_middleware__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/zustand/esm/middleware.mjs"),useSearchStore=(0,zustand__WEBPACK_IMPORTED_MODULE_0__.Ue)()((0,zustand_middleware__WEBPACK_IMPORTED_MODULE_1__.mW)((function(set){return{query:"",isSearching:!1,setQuery:function setQuery(query){return set({query})},toggleSearch:function toggleSearch(){return set((function(state){return{isSearching:!state.isSearching}}))}}})))},"./node_modules/react-wrap-balancer/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{ZP:()=>M});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),m="undefined"==typeof window,d=m?react__WEBPACK_IMPORTED_MODULE_0__.useEffect:react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect;var f="__wrap_b",R="__wrap_o",_=(t,r,e)=>{let s=(e=e||document.querySelector(`[data-br="${t}"]`)).parentElement,a=T=>e.style.maxWidth=T+"px";e.style.maxWidth="";let p,n=s.clientWidth,u=s.clientHeight,o=n/2-.25,c=n+.5;if(n){for(a(o),o=Math.max(e.scrollWidth,o);o+1<c;)p=Math.round((o+c)/2),a(p),s.clientHeight===u?c=p:o=p;a(c*r+n*(1-r))}e.__wrap_o||"undefined"!=typeof ResizeObserver&&(e.__wrap_o=new ResizeObserver((()=>{self.__wrap_b(0,+e.dataset.brr,e)}))).observe(s)},O=_.toString(),v=(t,r,e="")=>react__WEBPACK_IMPORTED_MODULE_0__.createElement("script",{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:(t?"":`self.${f}=${O};`)+e},nonce:r}),g=react__WEBPACK_IMPORTED_MODULE_0__.createContext(!1);var M=({ratio:t=1,nonce:r,children:e,...s})=>{let a=function b(){return react__WEBPACK_IMPORTED_MODULE_0__.useMemo((()=>react__WEBPACK_IMPORTED_MODULE_0__.useId),[])()}(),n=react__WEBPACK_IMPORTED_MODULE_0__.useRef(),u=react__WEBPACK_IMPORTED_MODULE_0__.useContext(g),o=s.as||"span";return d((()=>{n.current&&(self[f]=_)(0,t,n.current)}),[e,t]),d((()=>()=>{if(!n.current)return;let c=n.current[R];c&&(c.disconnect(),delete n.current[R])}),[]),react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(o,{...s,"data-br":a,"data-brr":t,ref:n,style:{display:"inline-block",verticalAlign:"top",textDecoration:"inherit"},suppressHydrationWarning:!0},e),v(u,r,`self.${f}("${a}",${t})`))}},"./node_modules/zustand/esm/shallow.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{X:()=>shallow});__webpack_require__("./node_modules/console-browserify/index.js");function shallow(objA,objB){if(Object.is(objA,objB))return!0;if("object"!=typeof objA||null===objA||"object"!=typeof objB||null===objB)return!1;if(objA instanceof Map&&objB instanceof Map){if(objA.size!==objB.size)return!1;for(const[key,value]of objA)if(!Object.is(value,objB.get(key)))return!1;return!0}if(objA instanceof Set&&objB instanceof Set){if(objA.size!==objB.size)return!1;for(const value of objA)if(!objB.has(value))return!1;return!0}const keysA=Object.keys(objA);if(keysA.length!==Object.keys(objB).length)return!1;for(let i=0;i<keysA.length;i++)if(!Object.prototype.hasOwnProperty.call(objB,keysA[i])||!Object.is(objA[keysA[i]],objB[keysA[i]]))return!1;return!0}}}]);